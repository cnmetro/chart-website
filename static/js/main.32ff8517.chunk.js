(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,a,t){e.exports=t.p+"static/media/logo.cd5e6a7c.svg"},134:function(e,a,t){e.exports=t(295)},139:function(e,a,t){},141:function(e,a,t){},161:function(e,a,t){},292:function(e,a,t){},295:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),c=t(57),o=t.n(c),l=(t(139),t(35)),i=t(36),s=t(41),u=t(37),m=t(42),h=(t(141),t(120)),v=t.n(h),p=t(58),d=t.n(p),g=(t(161),t(301)),f=t(290),y=t(291),E=t(300),b=t(297),k=t(119),N=t(298),j=function(e){function a(){var e,t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={data:[],query:"count=30"},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"request",value:function(e,a){return d.a.get("http://metro.sinchang.me/api/flows?city=".concat(a,"&").concat(e)).then(function(e){return e.data})}},{key:"requestAll",value:function(e){return Promise.all([this.request(e,"sh"),this.request(e,"bj"),this.request(e,"gz")])}},{key:"formatData",value:function(e){var a=["Shanghai","Beijing","Guangzhou"],t=JSON.parse(JSON.stringify(e[0].data));e.forEach(function(e,n){e.data.forEach(function(e,r){t[r][a[n]]=e.num})}),this.setState({data:t.reverse()})}},{key:"componentDidMount",value:function(){var e=this;this.requestAll(this.state.query).then(function(a){e.formatData(a)})}},{key:"render",value:function(){return r.a.createElement("div",{className:""},r.a.createElement(g.a,{width:1e3,height:500,data:this.state.data,margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(f.a,{dataKey:"date"}),r.a.createElement(y.a,null),r.a.createElement(E.a,{strokeDasharray:"3 3"}),r.a.createElement(b.a,null),r.a.createElement(k.a,null),r.a.createElement(N.a,{type:"monotone",dataKey:"Shanghai",stroke:"#8884d8"}),r.a.createElement(N.a,{type:"monotone",dataKey:"Beijing",stroke:"#82ca9d"}),r.a.createElement(N.a,{type:"monotone",dataKey:"Guangzhou",stroke:"#1281ca"})))}}]),a}(n.Component),w=(t(292),{sh:"#8884d8",bj:"#82ca9d",gz:"#1281ca"}),O=function(e){function a(){var e,t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={name:"",query:"count=30",data:[]},t.handleChange=function(e){t.fetchData(null,e.target.value)},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"request",value:function(e,a){return d.a.get("http://metro.sinchang.me/api/flows?city=".concat(a,"&").concat(e)).then(function(e){return e.data})}},{key:"componentDidMount",value:function(){var e=this.props.match.params.name;this.fetchData(e)}},{key:"componentWillReceiveProps",value:function(e){var a=e.match.params.name;a!==this.state.name&&this.fetchData(a)}},{key:"fetchData",value:function(e,a){var t=this;e=e||this.state.name,a=a||this.state.query,this.request(a,e).then(function(n){t.setState({data:n.data.reverse(),name:e,query:a})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("select",{className:"form-control type-select",value:this.state.query,onChange:this.handleChange},r.a.createElement("option",{value:"count=30"},"The last 30 Day"),r.a.createElement("option",{value:"count=10&sort=desc"},"Top10"),r.a.createElement("option",{value:"year=2018"},"2018 Year"),r.a.createElement("option",{value:"year=2017"},"2017 Year"),r.a.createElement("option",{value:"year=2016"},"2016 Year"),r.a.createElement("option",{value:"year=2015"},"2015 Year")),r.a.createElement(g.a,{width:1e3,height:500,data:this.state.data,margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(f.a,{dataKey:"date"}),r.a.createElement(y.a,null),r.a.createElement(E.a,{strokeDasharray:"3 3"}),r.a.createElement(b.a,null),r.a.createElement(k.a,null),r.a.createElement(N.a,{type:"monotone",dataKey:"num",stroke:w[this.state.name]})))}}]),a}(n.Component),q=t(302),D=t(303),C=t(296),A=function(e){function a(){return Object(l.a)(this,a),Object(s.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(i.a)(a,[{key:"activeEvent",value:function(e,a){return!!e&&(e.url===a.pathname||void 0)}},{key:"render",value:function(){return r.a.createElement(q.a,null,r.a.createElement("div",{className:"app"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("a",{className:"navbar-brand",href:"/"},r.a.createElement("img",{src:v.a,width:"30",height:"30",className:"d-inline-block align-top",alt:"logo"})),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},r.a.createElement("div",{className:"navbar-nav"},r.a.createElement(D.a,{className:"nav-item nav-link",to:"/",activeClassName:"active",isActive:this.activeEvent},"Home"),r.a.createElement(D.a,{className:"nav-item nav-link",to:"/city/sh",activeClassName:"active"},"Shanghai"),r.a.createElement(D.a,{className:"nav-item nav-link",to:"/city/bj",activeClassName:"active"},"Beijing"),r.a.createElement(D.a,{className:"nav-item nav-link",to:"/city/gz",activeClassName:"active"},"Guangzhou")))),r.a.createElement("p",{className:"tip-text"},"(unit: Ten thousand)"),r.a.createElement(C.a,{exact:!0,path:"/",component:j}),r.a.createElement(C.a,{exact:!0,path:"/city/:name",component:O})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[134,2,1]]]);
//# sourceMappingURL=main.32ff8517.chunk.js.map